# 信息学启蒙<br/>第三单元 数论基础

1. 从自然数到整数
1. 整数的性质
1. 完美数
1. 自恋数
1. 质数的判定
1. 算术基本定理
1. 整数的质因子分解
1. 欧几里得算法
1. 中国剩余定理
1. 幻方

		
## 第一讲

- 标题：从自然数到整数
- 旁白：清华大大，两个正数相乘好理解，一个正数一个负数相乘是啥意义呢？
- 主播：兮兮真厉害，只有深度思考的孩子才会提这样的问题。咱看白板。
- 讲解要点：
   1. 在全体自然数中，加法和乘法是封闭的。
   1. 如果被减数比减数小，做减法时就先从大的减小的，并给结果加上一个负号，表示亏欠，这就出现了负数。
   1. 通过镜子形象解释相反数和绝对值的概念。
   1. 引入数轴，并解释加法和减法的几何意义。
   1. 全体自然数以及它们的相反数构成了全体整数。在全体整数中，加法、减法和乘法运算是封闭的。
   1. 给出求相反数和绝对值的考鼎码。
   1. 如何理解乘数为负数时乘法的意义？
   1. 整数范围内四则运算的性质。

	
### 从自然数到整数

1. 在全体自然数中，加法和乘法是封闭的。
1. 在全体整数中，加法、减法、乘法以及带余除法运算是封闭的。

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
#### 负数的出现、定义和写法<!-- .element: class="fragment fade-out" -->

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
#### 整数数轴、相反数和绝对值<!-- .element: class="fragment fade-out" -->

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
#### 负号和减法<!-- .element: class="fragment fade-out" -->

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
### 求相反数

```mathematica
算始 相反数 (n)
    返回 (0 - n)
算终
```

或者，

```mathematica
算始 相反数 (n)
    返回 (-1 * n)
算终
```

或者，

```mathematica
算始 相反数 (n)
    返回 -n
算终
```

	
### 求绝对值

```mathematica
算始 绝对值 (n)
    若始 (n < 0)
        返回 (0 - n)
    若否
        返回 n
    若终
算终
```

	
### 如何理解乘数为负数时乘法的意义？<!-- .element: class="fragment fade-out" -->

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
### 整数范围内四则运算的性质<!-- .element: class="fragment fade-out" -->

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
### 作业

<div class="no-list-style">

- 1) 完成如下计算，如遇代数式，则 `$ a $` 取 `$ 11 $`，`$ b $` 取 `$ 33 $`：

`$$
\begin{align}
    0 - 88 &=                   \\
    0 + -88 &=                  \\
    -88 \times b &=             \\
    88 \times -3 &=             \\
    0 - a \times 3 &=          \\
    123 - 256 &=                \\
    \mid -256 \mid &=           \\
    \mid 256 \mid &=            \\
    100 + 120 \div (12 - \mid 17 - 26 \mid) \times 6 &= \\
    (a - b) \div 11 &= \\
\end{align}
$$`

- 2) 增强加法实现的乘法考鼎码算法，使之支持负数作为被乘数或乘数。

</div>

		
## 第二讲

- 标题：整数相关的定义
- 旁白：清华大大，感觉整数没啥好玩的，加法、乘法太简单了。
- 主播：别急别急，数论可是一个很重要的数学分支呢。
- 讲解要点：
   1. 整数相关的定义
   1. 整数的性质

	
### 整数相关的定义

1. 奇数、偶数<!-- .element: class="fragment fade-in" -->
1. 质数、合数<!-- .element: class="fragment fade-in" -->
1. 完全平方数、完全立方数<!-- .element: class="fragment fade-in" -->

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
### 整数的性质

1. 如果 `$ n $` 是合数，则 `$ 2^n - 1 $` 也是合数。<!-- .element: class="fragment fade-in" -->
1. 任意合数至少有一个质因数。<!-- .element: class="fragment fade-in" -->
1. 有无穷多个既是完全平方数又是完全立方数的数。<!-- .element: class="fragment fade-in" -->
1. 从 1 开始的连续奇数之和是一个完全平方数。<!-- .element: class="fragment fade-in" -->
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
### 考鼎码新语法：注释

```mathematica
# 这个算法判定一个正整数是否为偶数
算始 是否为偶数 (n)
    若始 (n % 2 == 0)
        返回 真
    若否
        返回 假
    若终
算终
```

	
### 判定一个正整数是否为一个完全平方数

```mathematica
# 这个算法假设传入的参数 n 是正整数
算始 是否为完全平方数 (n)
    i := 1
    当始 (i <= n)
        若始 (i * i == n)
            返回 真
        若终
        i := i + 1
    当终

    返回 假
算终
```

	
### 作业

<div class="no-list-style">

- 1) 当 `$ n $` 分别取 `$ 1 $`、`$ 2 $`、`$ 3 $`、`$ 4 $`、`$ 5 $`、`$ 6 $` 时，计算对应代数式的值：

`$$
\begin{align}
    n  &=  \quad && 1 \quad && 2 \quad && 3 \quad && 4 \quad && 5 \quad && 6 \\
    2n &=                           \\
    2n + 1 &=                       \\
    n^2 &=                          \\
    n^3 &=                          \\
    2^n - 1 &=
\end{align}
$$`

- 2) 写出 `30` 以内的所有质数。
- 3) 编写考鼎码算法，计算从 `1` 开始的 `n` 个奇数之和。
- 4) 编写考鼎码算法，判定一个给定的整数是否为一个完全立方数。

</div>

		
## 第三讲

- 标题：完美数
- 旁白：清华大大，听说有些数很完美，咋定义的呢？
- 主播：哈哈，有些数的确挺有意思的。看白板哈。
- 讲解要点：
   1. 给出完美数的定义。
   1. 如何求序列中所有元素之和。

	
### 完美数的定义<!-- .element: class="fragment fade-out" -->

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
### 找出一个正整数的所有真因子

```mathematica
# n 必须为正整数
算始 真因子序列 (n)
    s := []

    i := 1
    当始 (i < n)
        若始 (n % i == 0)
            s := s + [i]
        若终
    当终

    返回 s
算终
```

	
### 序列元素之和

```mathematica
算始 序列元素之和 (seq, n)
    sum := 0

    i := 0
    当始 (i < n)
        sum  = sum + seq[i]
        i := i + 1
    当终

    返回 sum
算终
```

	
### 作业

<div class="no-list-style">

- 1) 列出下列各数的真因子（第一行为示例解答）：

`$$
\begin{align}
    4  &:  1, 2                     \\
    2  &:                           \\
    12 &:                           \\
    25 &:                           \\
    77 &:                           \\
\end{align}
$$`

- 2) 编写考鼎码算法，判定给定的正整数是不是完美数。

</div>

		
## 第四讲

- 标题：自恋数
- 旁白：清华大大，听说有些数很自恋，这是咋回事啊？
- 主播：哈哈，这名字的背后还有个神话故事。看白板哈。
- 讲解要点：
   1. 给出自恋数的定义。
   1. 给出自恋数名称的来由。

	
### 自恋数的定义<!-- .element: class="fragment fade-out" -->

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
### 确定数码序列的长度

```mathematica
# 这个算法要求序列的最后一个元素为 -1。
# 因为表示数码的序列中不可能包含 -1，所以可将 -1 作为标志，表示序列结束。
# 亦可使用 未定义 表示序列的结束
算始 数码序列长度 (s)
    n := 0
    当始 (s[n] != -1)
        n := n + 1
    当终

    返回 n
算终
```

	
### 作业

<div class="no-list-style">

- 1) 求出下列十进制三位数各位的立方和（第一行为示例解答）：

`$$
\begin{align}
    123  &:  1^3 + 2^3 + 3^3 = 36 \\
    234  &:                       \\
    205  &:                       \\
\end{align}
$$`

- 2) 编写考鼎码算法，找出小于等于给定正整数 `n` 的所有自恋数。

</div>

		
## 第五讲

- 标题：质数的判定
- 旁白：清华大大，听说前两天已知最大的质数记录又被刷新了。人类为啥要不停地找新的质数啊？
- 主播：这个讲起来话可就长了！且听我娓娓道来。
- 讲解要点：
   1. 质数的定义
   1. 已知最大的质数
   1. 质数的性质
   1. 简单介绍哥德巴赫猜想
   1. 给出质数判定算法的朴素实现

	
### 质数的定义

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
### 已知最大的质数

`$$
\large{
    2^{136,279,841} - 1
}
$$`

- 该质数的十进制表达有 `41,024,320` 位。
- 2024 年由前英伟达员工通过 GPU 集群发现。
- 人类为啥要不停地寻找新的质数？

	
### 质数的性质

1. 质数有无穷多个。<!-- .element: class="fragment fade-in" -->
1. 2 是唯一的偶质数；大于 2 的质数都是奇数。<!-- .element: class="fragment fade-in" -->
1. 两个质数之间的缺口可以任意长。<!-- .element: class="fragment fade-in" -->
1. 孪生质数貌似有无穷多对。<!-- .element: class="fragment fade-in" -->
1. 三胞胎质数只有一组：(3, 5, 7)。<!-- .element: class="fragment fade-in" -->
1. n 和 2n 之间一定存在一个质数。<!-- .element: class="fragment fade-in" -->

<br/>
<br/>
<br/>
<br/>

	
### 哥德巴赫猜想

1. 最初版本：任一大于 `2` 的整数都可写成三个质数之和。
1. 现代描述：任一大于 `5` 的整数都可写成三个质数之和。
1. 欧拉版本：任一大于 `2` 的偶数都可写成两个质数之和。

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
### 质数判定算法的朴素实现

```mathematica
# 这个算法假设传入的参数 n 是正整数
算始 是否为质数 (n)
    若始 (n < 2)
        返回 假
    若终

    若始 (n == 2)
        返回 真
    若终

    i := 2
    当始 (i < n)
        若始 (n % i == 0)
            返回 假
        若终
    当终

    返回 真
算终
```

	
### 作业

1. 挑选出 `1`、`2`、`7`、`8`、`31`、`87`、`91`、`100`、`201`、`992` 当中的质数。
1. 优化本节给出的质数判定算法。
1. 编写考鼎码算法，分解大于 `2` 的任意偶数为两个质数之和。

		
## 第六讲

- 标题：算术基本定理
- 旁白：清华大大，听说一个整数分解成质数相乘的形式，只有唯一一种，这是为什么呢？
- 主播：这叫算术基本定理，咱爷俩今天一起验证一下。看白板。
- 讲解要点：
   1. 算术基本定理的解释。
   1. 证明一下质数有无穷多个。
   1. 解释反证法的逻辑。

	
### 算术基本定理

- 任何一个大于 `$ 1 $` 的自然数 `$ n $` 都可以分解成有限个质数的乘积形式，而且是唯一的：

`$$
\begin{align}
  n &= p_1^{e_1} \times p_2^{e_2} \times \cdots \times p_k^{e_k} \\
    其中：&p_1 < p_2 < \cdots < p_k 是质数   \\
    指数 &e_1, e_2, \cdots, e_k 是正整数     \\
\end{align}
$$`<!-- .element: class="fragment fade-in" -->

	
### 有无穷多个质数的证明<!-- .element: class="fragment fade-out" -->

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
### 作业

<div class="no-list-style">

- 1) 分解如下整数，将其写成质因子的幂相乘的形式（第一行为示例解答）：

`$$
\begin{align}
    100 &= 2^2 \times 5^2       \\
    88  &=                      \\
    127 &=                      \\
    256 &=                      \\
    565 &=                      \\
    999 &=                      \\
\end{align}
$$`

- 2) 设定一个已知质数构成的序列，初始时，该序列中只有 `2` 一个元素。然后从 `3` 开始依次检测每个整数，用已知质数序列中的每个质数去除这个整数。如果某个已知质数是这个整数的因子，则该整数为一个合数，否则该整数为下一个新发现的质数，并将其加入到已知质数的序列当中。如此，我们可以生成一个包含从小到大排列的所有质数的序列。请按此方法编写考鼎码算法，生成小于等于给定正整数 `n` 的所有质数序列。
- 3) 请思考上述算法的至少一个优化点。

</div>

		
## 第七讲

- 标题：整数的质因子分解
- 旁白：清华大大，既然每个整数有唯一的质因子分解方案，那我是不是可以写个算法找出这些质因子？
- 主播：兮兮聪明，这肯定可以。我们看白板。
- 讲解要点：
   1. 解释什么叫整数的质因子分解。
   1. 朴素版本的思路。
   1. 优化的目标，举例分析如何降低计算和判断的次数。

	
### 整数的质因子分解<!-- .element: class="fragment fade-out" -->

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
### 质因子分解算法思路（朴素版）

1. 类似质数判定的试除法，用大于等于 `2` 小于等于 `n` 的整数 `i` 去除 `n`。
1. 如果 `i` 可以整除 `n`，则继续判断该 `i` 是否为质数；如果不是，则迭代下一个整数，如果是，则输出。

	
### 质因子分解算法思路（优化版）

1. 目标：减少计算和判断次数。
1. 分析：有哪些地方做了重复判断？

	
### 作业

1. 写出质因子分解算法朴素版的考鼎码；该考鼎码分解一个大于 `1` 的正整数 `n`，返回一个序列，其中包含该正整数的所有的质因子。注意：如果是该正整数是一个质数，则结果序列中应仅包含自己。
1. 写出质因子分解算法优化版的考鼎码；要求同上。

		
## 第八讲

- 标题：欧几里得算法
- 旁白：清华大大，两千年前的欧几里得好厉害，会几何还发明了很多算法。您快给讲讲。
- 主播：的确厉害，欧几里得的《几何原本》好几百页呢。今天给你讲讲欧几里得算法。看白板。
- 讲解要点：
   1. 欧几里得的贡献。
   1. 最大公因子或者最大公约数的概念。
   1. 短除法求最大公因子。
   1. 欧几里得算法。

	
### 欧几里得的贡献

- 发现了前四个完美数：`$ 6, 28, 496, 8128 $`。
- 欧几里得算法：又称辗转相除法，用于计算两个整数最大公约数/最大公因子。
- 《几何原本》：整理并系统阐述了几何学的基本概念、定理和证明过程。
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
### 什么是最大公因子<!-- .element: class="fragment fade-out" -->

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
### 短除法求最大公因子<!-- .element: class="fragment fade-out" -->

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
### 欧几里得算法

- 欧几里得算法的数学基础：`$ \large{ \gcd (a, b) = \gcd (b, a \bmod b) } $` <!-- .element: class="fragment fade-in" -->

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
### 欧几里得算法的考鼎码

```mathematica
算始 最大公因子 (a, b)
    当始 (b != 0)
        tmp := a
        a := b
        b := tmp % b
    当终

    返回 a
算终
```

	
### 作业

1. 利用短除法手工求 `30` 和 `22` 的最大公因子。
1. 利用欧几里得算法手工求 `337` 和 `21` 的最大公因子。
1. 使用本讲给出的欧几里得算法，当给定的初始值 `a, b` 取下列各值时，写出算法每一个步骤各变量的值以及执行结果（可使用表格）。  
      a) `a=22, b=11`<br/>
      b) `a=125, b=20`
1. 为防止在取模过程中出现除数为零的情形，需要调整本讲给出的欧几里得算法，请尝试添加代码使之可以避免出现除数为零的情况。
1. 写出求最小公倍数的考鼎码。

		
## 第九讲

- 标题：中国剩余定理
- 旁白：清华大大，听说咱古代有个孙子定理，老外也经常用。您快给讲讲。
- 主播：对的对的，也叫中国剩余定理，是初等数论中很重要的一个定理。看白板喽。
- 讲解要点：
   1. 中国剩余定理的解释。
   1. 讲解朴素解法。
   1. 讲解考鼎码。

	
### 中国剩余定理/孙子定理

- 《孙子算经》：有物不知其数，三三数之剩二，五五数之剩三，七七数之剩二。问物几何？
- 翻译后：一个整数除以 `3` 余 `2`，除以 `5` 余 `3`，除以 `7` 余 `2`，求这个整数。

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
### 孙子定理的朴素解法<!-- .element: class="fragment fade-out" -->

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

	
### 孙子定理朴素解法的考鼎码

```mathematica
算始 孙子定理朴素解法
    x := 2

    当始 (x < 1000)

        若始 (x % 3 == 2)
            若始 (x % 5 == 3)
                若始 (x % 7 == 2)
                    返回 x
                若终
            若终
        若终

        x += 1
    当终

    # 返回 0 表示未找到
    返回 0
算终
```

	
### 作业

1. 本讲给出的孙子定理朴素解法有点低效，请尝试优化。
1. 满足中国剩余定理所述问题的整数是唯一的吗？如果不唯一且得到一个解，那么满足该定理的其他整数如何求得？请给出其考鼎码。
1. 思考如果模数不是固定的 `3`、`5`、`7`，对应的余数也不是固定的 `2`、`3`、`3`，甚至可能给出更多的模数和对应的余数，我们需要如何改造考鼎码算法以适应这种情况？

		
## 第十讲

- 标题：幻方
- 旁白：清华大大，您玩过幻方吗？
- 主播：玩过呀，很好玩，但也很费脑子。
- 要点：
   1. 介绍幻方、洛书
   1. 介绍杨辉幻方
   1. 分析幻方的解法
   1. 异形幻方

	
### 幻方

<img style="height:700px;width:auto;" src="assets/enlightenment-magic-square.svg" />

	
### 杨辉幻方

<img style="height:700px;width:auto;" src="assets/enlightenment-magic-square-yanghui.svg" />

	
### 异形幻方

<img style="height:700px;width:auto;" src="assets/enlightenment-magic-triangle.svg" />

	
### 作业

1. 已知填充幻方的连续整数的起始值 `$ n $`，写出计算 `$ 3 \times 3 $` 幻方各行、列或对角线之和的考鼎码算法。
1. 在以上条件下，写出确定对应幻方中心位置数值的考鼎码算法。
1. 在以上条件下，画出当选择某个合理的数值填充左上角，并选择与之相邻的数值填充右上角，然后尝试填充其他格子并得出是否可以成功解出幻方的算法流程图。

