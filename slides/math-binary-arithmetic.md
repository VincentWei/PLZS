# 二进制运算及实数的计算机表达

- 电子计算机的运转原理和性能衡量指标
- 二进制术语
- 令人讨厌的东西
- 常见二进制运算

		
## 二进制的优势

* 十进制的麻烦：基础零件太过复杂
* 巴贝奇时代，二进制概念尚未形成，布尔代数尚未提出
* 使用二进制可以构造数学上最简单的加法器
* 电子晶体管可以用来构建二进制的基础运算单元，而且足够小、足够快
* 过去五十年，电子计算机的大发展时代

		
## 电子计算机的运转原理

* 时钟周期：节拍
* 指令：在一个或者多个时钟周期内完成的不可分隔的操作
* 指令集及架构：IA32、x86-64、ARM、ARM64、MIPS、RISC-V、LoongArch

		
## 电子计算机的性能衡量指标

* 比特位宽：可同时处理的比特位数量（8、16、32、64）。
* 运算速度：每秒百万指令数（MIPS）、每秒浮点运算次数（FLOPS）。

		
## 二进制术语（1/2）

* 比特（bit），缩写时用小写 b。
* 字节（byte），缩写时用大写 B。
* bps：每秒位数，通常用来表示传输速度，比如宽带 1000Mbps 或者 1Gbps。
* K、M、G 等前缀引起的混乱。

		
## 二进制术语（2/2）

* 最高位（MSB）
* 最低位（LSB）
* 字节的二进制（binary）表示：1000.1000b
* 字节的十六进制（hexadecimal）表示：0x88，88h
* 字（word）、双倍字（double word）、四倍字（quadruple word）、双四倍字（double quadruple word）

		
## 二进制的特殊运算

* 位运算：与（AND）、或（OR）、取反（NOT）、亦或（XOR）
* 移位运算

		
## 二进制运算技巧

* 判断奇偶性：x & 1
* 使用移位优化乘除法：x >> 3
* 用符号位表示负数：~x = -x -1
* 判断是否是 2 的正整数幂：(~(n & (n - 1)))
* 圆整为大于等于自己（n）的最小的 2 的正整数（N）幂：((n + (N - 1)) & -N)
* 最简单的加解密：x ^ y ^ y = x

		
## 正整数及负整数的表达

* 补码的概念
* 使用补码表达负整数的优点

		
## 整数运算的陷阱

* 溢出
* 被零除

		
## 任意实数的表述方式

* 计算机只能有限或者近似表达任意实数
* 实数的表述方法：浮点数、定点数和任意精度。

		
## 浮点数原理

* 数学上的科学计数法：x * 10 ^ E（abs(x) >= 1 && abs(x) < 10）
* 光速：299792458 m/s，2.99792458E8 m/s
* 计算机中的浮点数：x * 2 ^ E（abs(x) >= 1 && abs(x) < 2）

		
## 浮点数类型

```
     sign    e      base
 16   1      5       10
 32   1      8       23     (Single)
 64   1      11      52     (Double)
 96   1      15      64     (Double-Extended)
 128  1      15      112    (Quadruple)
```

		
## 浮点数表述的特点

* 特殊表达：
   - 零：0.0 和 -0.0。
* 无限大（INF，Infinity）、无限小（-INF）
* 非实数（NaN，Not a Number）

		
## 浮点数的表述误差

* 使用单精度浮点数表示十进制 0.1：

```c
0.100000001490116119384765625
```

* 0.1 的平方 0.01：

```c
0.010000000298023226097399174250313080847263336181640625
```

		
## 浮点数表述的特征值

* EPSILON：两个可表述实数之间的最小间隙值。
* MAX SAFE INTERGER：可以无误差表述的最大整数（正整数）。
* MIN SAFE INTERGER：可以无误差表述的最小整数（负整数）。
* MAX VALUE：可表述的最大正整数。
* MIN VALUE：可表述的最小正整数。

		
## 定点数的概念

* 使用整数当中的一半比特位来表示整数部分，另外一半比特位来表示小数部分
* 性能好，精度有限：
  * 实数的四则运算可使用整数进行，性能最好。
  * 其他非线性运算，可采用查表法。

		
## 任意精度运算

* bc：可支持 2,147,483,647 位小数点位数
* gmp：GNU 的多精度运算库

		
## 11. 高级编程语言中的数

* C、C++、Java 等，明确区分无符号整数、有符号整数以及浮点数。
* Python：整型、长整型、浮点数和复数。
* JavaScript：抽象的实数，不区分整数及浮点数，内部实现一般使用 64 位浮点数表达。

